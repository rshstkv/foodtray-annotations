# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç–º–µ—Ç–∫–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤

## –û–±–∑–æ—Ä

–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–Ω–Ω–æ—Ç–∞—Ç–æ—Ä–∞–º –±—ã—Å—Ç—Ä–æ –æ—Ç–º–µ—á–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã (–±–ª—é–¥–∞, —Ç–∞—Ä–µ–ª–∫–∏), –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç—ã –¥—Ä—É–≥–∏–º–∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ "O"
- **–ö–ª–∞–≤–∏—à–∞**: `O` (–∞–Ω–≥–ª–∏–π—Å–∫–∞—è)
- **–î–µ–π—Å—Ç–≤–∏–µ**: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å `is_overlapped` –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- **–†–∞–±–æ—Ç–∞–µ—Ç**: –ö–æ–≥–¥–∞ –≤—ã–±—Ä–∞–Ω –ª—é–±–æ–π bbox (–±–ª—é–¥–æ –∏–ª–∏ —Ç–∞—Ä–µ–ª–∫–∞)

### 2. –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è

#### –ù–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- **–î–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª–æ—Å—ã**: –ü–µ—Ä–µ–∫—Ä—ã—Ç—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ–º–µ—á–µ–Ω—ã –æ—Ä–∞–Ω–∂–µ–≤—ã–º –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º
- **–¶–≤–µ—Ç**: –û—Ä–∞–Ω–∂–µ–≤—ã–π (`rgba(249, 115, 22, 0.15)`)
- **–ü–∞—Ç—Ç–µ—Ä–Ω**: –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª–æ—Å—ã –ø–æ–¥ —É–≥–ª–æ–º 45¬∞

#### –ù–∞ –ª–µ–π–±–ª–µ bbox
- **–ò–∫–æ–Ω–∫–∞**: üîÄ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø–µ—Ä–µ–∫—Ä—ã—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- **–ü—Ä–∏–º–µ—Ä**: `‚úèÔ∏è –ü–ª–æ–≤ üîÄ`

#### –í —Ç—É–ª–±–∞—Ä–µ
- **–ö–Ω–æ–ø–∫–∞**: "–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ" / "–ü–µ—Ä–µ–∫—Ä—ã—Ç üîÄ"
- **–ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –û—Ä–∞–Ω–∂–µ–≤–∞—è –∫–Ω–æ–ø–∫–∞ —Å –±–µ–ª—ã–º —Ç–µ–∫—Å—Ç–æ–º
- **–ù–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: Outline –∫–Ω–æ–ø–∫–∞ —Å hover-—ç—Ñ—Ñ–µ–∫—Ç–æ–º

### 3. –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å "–û—Ç–º–µ—Ç–∫–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π"

–ù–∞ —ç—Ç–∞–ø–µ `check_overlaps` –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–∞–Ω–µ–ª–∏:
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
  - –§–æ—Ä–º–∞—Ç: `[–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç—ã—Ö] / [–≤—Å–µ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤]`
- **–ü–æ–¥—Å–∫–∞–∑–∫–∏**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–æ—Ä—è—á–∏—Ö –∫–ª–∞–≤–∏—à–∞—Ö
- **–°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º (–û—Å–Ω–æ–≤–Ω–æ–µ —Ñ–æ—Ç–æ / –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞)
- **–ö–Ω–æ–ø–∫–∏**: –ë—ã—Å—Ç—Ä–∞—è –æ—Ç–º–µ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

#### –ù–∞–≤–∏–≥–∞—Ü–∏—è:
- –ö–ª–∏–∫ –Ω–∞ –æ–±—ä–µ–∫—Ç –≤ —Å–ø–∏—Å–∫–µ ‚Üí –≤—ã–±–æ—Ä bbox –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- `‚Üë/‚Üì` ‚Üí –Ω–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
- `O` ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è

## –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

1. **–û—Ç–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É** –Ω–∞ —ç—Ç–∞–ø–µ "–û—Ç–º–µ—Ç–∫–∞ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π"
2. **–í—ã–±—Ä–∞—Ç—å –æ–±—ä–µ–∫—Ç** (–∫–ª–∏–∫ –Ω–∞ bbox –∏–ª–∏ –≤—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞)
3. **–û—Ü–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ**: –í–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–µ—Ä–µ–∫—Ä—ã—Ç –ª–∏ –æ–±—ä–µ–∫—Ç
4. **–ù–∞–∂–∞—Ç—å "O"** –∏–ª–∏ –∫–ª–∏–∫–Ω—É—Ç—å –∫–Ω–æ–ø–∫—É –≤ —Ç—É–ª–±–∞—Ä–µ/–ø–∞–Ω–µ–ª–∏
5. **–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É** –æ–±—ä–µ–∫—Ç—É —Å –ø–æ–º–æ—â—å—é `‚Üë/‚Üì`
6. **–ó–∞–≤–µ—Ä—à–∏—Ç—å —ç—Ç–∞–ø** –∫–Ω–æ–ø–∫–æ–π "–ó–∞–≤–µ—Ä—à–∏—Ç—å —ç—Ç–∞–ø" –∏–ª–∏ `Enter`

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ü–æ–ª–µ**: `is_overlapped` (BOOLEAN)
- **–¢–∞–±–ª–∏—Ü–∞**: `annotations`
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `FALSE`
- **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫**: `dish` –∏ `plate` –æ–±—ä–µ–∫—Ç–∞–º

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `OverlapAnnotationPanel.tsx` - –ü–∞–Ω–µ–ª—å –¥–ª—è —ç—Ç–∞–ø–∞ –æ—Ç–º–µ—Ç–∫–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π

#### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `useHotkeys.ts` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ "O"
- `BBoxLabel.tsx` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–∫–æ–Ω–∫–∞ üîÄ –¥–ª—è –ø–µ—Ä–µ–∫—Ä—ã—Ç—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- `BBoxToolbar.tsx` - –£–ª—É—á—à–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ"
- `BBoxAnnotator.tsx` - –î–æ–±–∞–≤–ª–µ–Ω –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- `page.tsx` (task/[id]) - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–∞–Ω–µ–ª–∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π

### API
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint:
- `POST /api/tasks/[id]/save`
- –ü–æ–ª–µ `is_overlapped` –≤–∫–ª—é—á–µ–Ω–æ –≤ –æ–±—ä–µ–∫—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏

## –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫)

| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `1-9` | –í—ã–±–æ—Ä –±–ª—é–¥–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É |
| `‚Üë/‚Üì` | –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ |
| `O` | **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ** |
| `H` | –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –≤—Å–µ bbox |
| `S` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å |
| `Enter` | –ó–∞–≤–µ—Ä—à–∏—Ç—å —ç—Ç–∞–ø |
| `Tab` | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–∞–ø |
| `Shift+Tab` | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É |
| `Esc` | –°–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ |
| `Del/Backspace` | –£–¥–∞–ª–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é |

## –í–∏–∑—É–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
- **–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π**: –û—Ä–∞–Ω–∂–µ–≤—ã–π (`#F97316` / `orange-500`)
- **–ü–∞—Ç—Ç–µ—Ä–Ω**: –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å 15% –¥–ª—è –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤–æ—Å—Ç–∏
- **–ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞—è**: `bg-orange-500`
- **–ö–Ω–æ–ø–∫–∞ hover**: `bg-orange-50`

### UX –ø—Ä–∏–Ω—Ü–∏–ø—ã
1. **–ë—ã—Å—Ç—Ä–æ—Ç–∞**: –û–¥–Ω–∞ –∫–ª–∞–≤–∏—à–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
2. **–ù–∞–≥–ª—è–¥–Ω–æ—Å—Ç—å**: –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –ü–∞–Ω–µ–ª—å –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
4. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å**: –°—á–µ—Ç—á–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π —Å –ø–æ–º–æ—â—å—é ML
- [ ] –£–∫–∞–∑–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç (—Å–≤—è–∑—å –º–µ–∂–¥—É –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏)
- [ ] –§–∏–ª—å—Ç—Ä "–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç—ã–µ" –Ω–∞ –¥—Ä—É–≥–∏—Ö —ç—Ç–∞–ø–∞—Ö
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è–º
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è (%, –≥—Ä–∞–¥–∞—Ü–∏—è)

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ —Ç–∏–ø–∞ `dish` –∏ `plate`
- –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –º–æ–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ —á–µ—Ä–µ–∑ —Ç—É–ª–±–∞—Ä
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–∞–ø–µ `check_overlaps`
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —ç—Ç–∞–ø–∞

