# Cleanup Plan - –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (80% –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥—Ñ–∏–∫—Å—ã:
1. ‚úÖ **is_deleted —Ñ–∏–ª—å—Ç—Ä –≤ UI** - —É–¥–∞–ª–µ–Ω–Ω—ã–µ bbox —Ç–µ–ø–µ—Ä—å –ü–†–û–ü–ê–î–ê–Æ–¢ –≤–∏–∑—É–∞–ª—å–Ω–æ
2. ‚úÖ **AnnotationEngine –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω** - –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å, is_manual —Ä–∞–±–æ—Ç–∞—é—Ç
3. ‚úÖ **stepGuards –ø–æ–¥–∫–ª—é—á–µ–Ω—ã** - –Ω–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
**4 –∏–∑ 5 –ø—Ä–æ–±–ª–µ–º –∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ò–°–ü–†–ê–í–õ–ï–ù–´!**

---

## ‚è≥ –û—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏ (20%)

### –§–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –ú–û–ñ–ù–û —É–¥–∞–ª–∏—Ç—å (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):

#### 1. –°—Ç–∞—Ä—ã–µ –ø–∞–Ω–µ–ª–∏ (–∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ ItemListPanel):
```bash
# –ú–û–ñ–ù–û —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã –≤ page.tsx:
rm src/components/task/DishSelectionPanel.tsx    # ‚Üí DishItemListPanel
rm src/components/task/BuzzerAnnotationPanel.tsx  # ‚Üí ItemListPanel
rm src/components/task/PlateAnnotationPanel.tsx   # ‚Üí PlateItemListPanel
```

#### 2. –°—Ç–∞—Ä–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è:
```bash
# –ú–û–ñ–ù–û —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
rm src/lib/validation.ts  # ‚Üí stepGuards.ts (—É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ useTaskManager)
```

### –§–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –ù–£–ñ–ù–û –û–°–¢–ê–í–ò–¢–¨:

```bash
# –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
src/components/task/TaskHeader.tsx           # –ù–æ–≤—ã–π, —Ä–∞–±–æ—Ç–∞–µ—Ç
src/components/task/BottleOrientationPanel.tsx  # –ù–æ–≤—ã–π, —Ä–∞–±–æ—Ç–∞–µ—Ç
src/components/task/OverlapAnnotationPanel.tsx  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
src/components/task/MenuSearchPanel.tsx      # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
src/components/task/ImageAnnotationInfo.tsx  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
src/components/task/TaskSidebar.tsx          # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
src/components/task/ImageGrid.tsx            # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

---

## üìä –°—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ:
- AnnotationEngine (CRUD, snapshot, validation)
- StepStateMachine (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏)
- StepGuards (–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤)
- Database migration
- ItemListPanel (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
- Migration helpers
- Auto-transition helpers
- useMenuModal hook
- is_deleted —Ñ–∏–ª—å—Ç—Ä –≤ UI ‚Üê **–ö–†–ò–¢–ò–ß–ù–û!**

### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –≥–æ—Ç–æ–≤–æ:
- useAnnotationManager - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å engine
- useTaskManager - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç stepGuards
- page.tsx - –¥–æ–±–∞–≤–ª–µ–Ω is_deleted —Ñ–∏–ª—å—Ç—Ä

### ‚ùå –ù–µ —Å–¥–µ–ª–∞–Ω–æ:
- –ó–∞–º–µ–Ω–∞ —Å—Ç–∞—Ä—ã—Ö –ø–∞–Ω–µ–ª–µ–π –Ω–∞ ItemListPanel –≤ page.tsx
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
- Comprehensive —Ç–µ—Å—Ç—ã

---

## üéØ Quick Win Actions

### –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–° (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
```bash
# 1. –£–¥–∞–ª–∏—Ç—å validation.ts (stepGuards.ts —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
git rm src/lib/validation.ts

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–æ—Å—å
npm run build
```

### –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ü–û–ó–ñ–ï (—Ç—Ä–µ–±—É–µ—Ç UI –∏–∑–º–µ–Ω–µ–Ω–∏–π):
```bash
# –ü–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã –≤ page.tsx:
git rm src/components/task/DishSelectionPanel.tsx
git rm src/components/task/BuzzerAnnotationPanel.tsx
git rm src/components/task/PlateAnnotationPanel.tsx

# Commit
git commit -m "cleanup: remove old panels after migration to ItemListPanel"
```

---

## üêõ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã:
```bash
# –ò—â–µ–º –≥–¥–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è validation.ts
grep -r "validation" src/ --include="*.ts" --include="*.tsx"

# –ò—â–µ–º –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –ø–∞–Ω–µ–ª–∏
grep -r "DishSelectionPanel\|BuzzerAnnotationPanel\|PlateAnnotationPanel" src/
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:
```bash
npm run lint
npm run build
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- –û—Ç–∫—Ä—ã—Ç—å –∑–∞–¥–∞—á—É
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–¥–∞–ª–∏—Ç—å bbox ‚Üí –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–ø–∞—Å—Ç—å
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞—Ç—å –±–ª—é–¥–æ ‚Üí –¥–æ–ª–∂–Ω—ã –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å—Å—è –≤—Å–µ –µ–≥–æ bbox
- –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å hover ‚Üí –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞

---

## üìù –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

### –ö–æ–º–º–∏—Ç—ã:
1. `8dbe542` - Unified Annotation Engine (–Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. `7a0b33a` - Integration + is_deleted filter (–∫—Ä–∏—Ç–∏—á–Ω—ã–π –±–∞–≥—Ñ–∏–∫—Å)

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ bbox (–ø—Ä–æ–ø–∞–¥–∞—é—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ!)
- ‚úÖ –í—ã–±–æ—Ä –±–ª—é–¥ (–ø–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞ –æ–±–µ–∏—Ö –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö)
- ‚úÖ Hover —ç—Ñ—Ñ–µ–∫—Ç—ã (–¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è (—É—á–∏—Ç—ã–≤–∞–µ—Ç is_deleted)
- ‚úÖ Export —Ñ–∏–ª—å—Ç—Ä –ø–æ —ç—Ç–∞–ø–∞–º
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π
- ‚úÖ is_manual —Ñ–ª–∞–≥

### –ß—Ç–æ –µ—â–µ –Ω—É–∂–Ω–æ:
- ‚è≥ –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–∞–Ω–µ–ª–∏ –Ω–∞ ItemListPanel (UI —Ä–∞–±–æ—Ç–∞)
- ‚è≥ –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Edit/Add from menu (–ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã –ø–∞–Ω–µ–ª–µ–π)

### Progress: **80% Complete** üéâ

---

## üí° Recommendations

### –°–µ–π—á–∞—Å (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —É–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –£–¥–∞–ª–∏—Ç—å validation.ts (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
3. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç

### –ù–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏:
1. –ó–∞–º–µ–Ω–∏—Ç—å DishSelectionPanel –Ω–∞ DishItemListPanel –≤ page.tsx
2. –ó–∞–º–µ–Ω–∏—Ç—å BuzzerAnnotationPanel –Ω–∞ ItemListPanel
3. –ó–∞–º–µ–Ω–∏—Ç—å PlateAnnotationPanel –Ω–∞ PlateItemListPanel
4. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–∞–Ω–µ–ª–∏
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∏—á–∏

---

## üéâ –ì–ª–∞–≤–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ

**–ö—Ä–∏—Ç–∏—á–Ω—ã–π –±–∞–≥ –ò–°–ü–†–ê–í–õ–ï–ù**: —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å **–ø—Ä–æ–ø–∞–¥–∞—é—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ** –±–ª–∞–≥–æ–¥–∞—Ä—è —Ñ–∏–ª—å—Ç—Ä—É `!a.is_deleted` –≤ page.tsx!

–≠—Ç–æ —Ä–µ—à–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É –∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

